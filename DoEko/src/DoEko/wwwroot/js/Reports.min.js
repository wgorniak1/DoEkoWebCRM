function onAjaxContractsGetFailed(n,t,i){alert(i)}function onAjaxContractsGetCompleted(n){for(var t=document.getElementById("ContractId"),i;t.options.length;)t.remove(0);i=new Option("","");t.options.add(i);$.each(n,function(n,i){var r=new Option(i.text,i.value);t.options.add(r)});updateExtractLink()}function updateExtractLink(){var n="projectId="+$("#ProjectId").val().toString(),t="contractId="+$("#ContractId").val().toString(),i="/Reports/SurveyToCSV?"+n+"&"+t;$(".data-link").attr("href",i)}function onProjectChange(){var n=$(this).val(),i=$(this).attr("data-project"),t;n!==i&&($(this).attr("data-project",n),t=$.ajax({type:"GET",url:"/Contracts/GetContractsAjax",data:{projectId:n},dataType:"json",contentType:"application/json"}),t.done(function(n,t){onAjaxContractsGetCompleted(n,t)}),t.fail(function(n,t,i){onAjaxContractsGetFailed(n,t,i)}))}function onContractChange(){updateExtractLink()}$("body").on("change",".data-project",onProjectChange);$("body").on("change",".data-contract",onContractChange);
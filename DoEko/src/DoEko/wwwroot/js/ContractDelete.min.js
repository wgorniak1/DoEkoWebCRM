function plndInstallChanged(){var n=$(this).val();n===1?$(".plannedinstallationpurpose").hide():$(".plannedinstallationpurpose").show()}function SectionPostFailure(n,t,i){$("#AjaxErrorMsg").html(i);$("#AjaxErrorDiv").fadeToggle(function(){$("#AjaxErrorDiv").fadeToggle(3e3)});alert("error")}function SectionPostSuccess(){}function onAjaxGetSuccess(n){var t,i;$("#Dynamic").html(n);t=$("#Dynamic form");t.removeData("validator");t.removeData("unobtrusiveValidation");$.validator.unobtrusive.parse(t);i=$("#Dynamic form").attr("id");i==="InvestmentGeneralInfo"?$("#stepPrev").attr("disabled","disabled"):$("#stepPrev").removeAttr("disabled");i==="SurveyPhoto"?($("#stepNext").attr("disabled","disabled"),$("#stepLast").removeClass("hidden")):($("#stepNext").removeAttr("disabled"),$("#stepLast").addClass("hidden"))}function onAjaxGetFailure(n,t,i){alert(i)}function ajaxGetPrevSection(){var n=$.ajax({type:"GET",url:"/Surveys/MaintainPreviousStepAjax",data:{currentStep:$("#Dynamic form").attr("id"),surveyId:$("#MaintainedSurveyId").val()},dataType:"html"});n.done(function(n,t){onAjaxGetSuccess(n,t)});n.error(function(n,t,i){onAjaxGetFailure(n,t,i)})}function ajaxGetNextSection(){var n=$.ajax({type:"GET",url:"/Surveys/MaintainNextStepAjax",data:{currentStep:$("#Dynamic form").attr("id"),surveyId:$("#MaintainedSurveyId").val()},dataType:"html"});n.done(function(n,t){onAjaxGetSuccess(n,t)});n.error(function(n,t,i){onAjaxGetFailure(n,t,i)})}function onAjaxPostError(n){var t=Object.keys(n.responseJSON),u=t.map(function(t){return n.responseJSON[t]}),i=0,r=$("form",$("#Dynamic"));t.forEach(function(n){var e=$('input[name="'+n+'"], select[name="'+n+'"]',r),f,t,o;e.removeClass("valid");e.addClass("input-validation-error");e.attr("aria-invalid",!0);f=$('span[data-valmsg-for="'+n+'"]',r);t=document.createElement("span");t.setAttribute("id",n.replace(".","_")+"-error");t.setAttribute("class","");o=document.createTextNode(u[i]);t.appendChild(o);f.addClass("field-validation-error");f.removeClass("field-validation-valid");f.html(t);i++})}function ajaxPostCurrentSection(n,t){var i=$("#Dynamic form");if(i.validate(),i.valid()){var u=i.attr("action"),f=i.attr("data-ajax-method"),e=i.attr("data-ajax"),r=$.ajax({type:f||"POST",url:u,data:i.serialize()});r.error(n);r.success(t)}}function btnAddOwner(){ajaxPostCurrentSection(onAjaxPostError,function(){var n=$.ajax({url:"/InvestmentOwners/CreatePersonAjax",data:{investmentId:$("#InvestmentId").val()},type:"GET",dataType:"html"});n.done(function(n,t){onAjaxGetSuccess(n,t)});n.error(function(n,t,i){onAjaxGetFailure(n,t,i)})})}function removeOwner(){var t=$("#InvestmentId").val(),i=$("#Owner_BusinessPartnerId").val(),n=$("#Dynamic form").attr("id").split("_"),u=n[1],f=n[2],r=$.ajax({type:"POST",url:"/InvestmentOwners/DeletePersonAjax",data:{investmentId:t,ownerId:i}});r.done(ajaxGetPrevSection)}function NavigationPrev(){ajaxPostCurrentSection(onAjaxPostError,ajaxGetPrevSection)}function NavigationNext(){ajaxPostCurrentSection(onAjaxPostError,ajaxGetNextSection)}function NavigationLast(){var n=$("#Dynamic form");n.validate();n.valid()&&n.submit()}function optionBtnTrue(){var i=$(this).attr("data-linked-checkbox"),n,t;$('input[name="'+i+'"]').val("True");n=$(this).attr("data-link-show-element");t=$(this).attr("data-link-hide-element");n!==""&&$(n).collapse("show");t!==""&&$(t).collapse("hide")}function optionBtnFalse(){var i=$(this).attr("data-linked-checkbox"),n,t;$('input[name="'+i+'"]').val("False");n=$(this).attr("data-link-show-element");t=$(this).attr("data-link-hide-element");n!==""&&$(n).collapse("show");t!==""&&$(t).collapse("hide")}$("body").on("change","#Localization",plndInstallChanged);$("body").on("click",".addowner",btnAddOwner);$("body").on("click",".deleteownersubmit",removeOwner);$("body").on("click","#stepNext",NavigationNext);$("body").on("click","#stepPrev",NavigationPrev);$("body").on("click","#stepLast",NavigationLast);$("body").on("change",".optionbutton-true",optionBtnTrue);$("body").on("change",".optionbutton-false",optionBtnFalse);$(document).on("change",":file",function(){var n=$(this),t=n.get(0).files?n.get(0).files.length:1,i=n.val().replace(/\\/g,"/").replace(/.*\//,""),r=n.attr("name");n.trigger("fileselect",[t,i,r])});$(document).on("fileselect",":file",function(n,t,i,r){$("#"+r).val(i)});